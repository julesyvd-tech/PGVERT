<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <meta property="og:title" content="PGVERT2" />
  <meta property="og:type" content="website" />
  <meta property="og:image" content="PXL_20251023_140822882 (1).jpg" />
  <meta property="og:description" content="A VHS dreamspace by PGVERT2." />
  <title>PGVERT2</title>
  <style>
    @import url('https://fonts.googleapis.com/css2?family=Space+Mono:wght@400;700&display=swap');

    :root {
      --bg1: radial-gradient(circle at center, #2b0047, #000010 80%);
      --glow-red: rgba(255, 0, 100, 0.4);
      --glow-blue: rgba(0, 180, 255, 0.4);
    }

    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      overflow: hidden;
      height: 100vh;
      width: 100vw;
      background: var(--bg1);
      font-family: 'Space Mono', monospace;
      display: flex;
      align-items: center;
      justify-content: center;
      position: relative;
      color: white;
      perspective: 1000px;
    }

    /* Container for all visuals */
    .scene {
      position: relative;
      width: 100%;
      height: 100%;
      overflow: hidden;
      display: flex;
      align-items: center;
      justify-content: center;
      flex-direction: column;
      transform-style: preserve-3d;
    }

    canvas#stars {
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      z-index: 0;
      pointer-events: none;
    }

    .tv-container {
      position: relative;
      width: 60vmin;
      height: 45vmin;
      display: flex;
      align-items: center;
      justify-content: center;
      background: black;
      border-radius: 2vmin;
      overflow: hidden;
      box-shadow: 0 0 30px rgba(255, 0, 150, 0.3),
                  0 0 30px rgba(0, 200, 255, 0.3);
      transform: translateZ(40px);
    }

    video {
      width: 100%;
      height: 100%;
      object-fit: cover;
      filter: contrast(1.3) saturate(1.1);
    }

    /* VHS overlay base */
    .vhs-overlay {
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: repeating-linear-gradient(
        to bottom,
        rgba(255, 255, 255, 0.02) 0px,
        rgba(0, 0, 0, 0.02) 2px,
        rgba(0, 0, 0, 0.05) 4px
      );
      mix-blend-mode: overlay;
      opacity: 0.4;
      pointer-events: none;
      z-index: 10;
      animation: drift 4s linear infinite;
    }

    @keyframes drift {
      from { transform: translateY(0); }
      to { transform: translateY(-5%); }
    }

    /* Flash overlay for 0.5s every 2.5min */
    .flash {
      position: absolute;
      inset: 0;
      background-size: cover;
      background-position: center;
      opacity: 0;
      transition: opacity 0.2s;
      z-index: 15;
      pointer-events: none;
    }

    /* Layout placeholders for SVGs */
    .paint, .glue {
      position: absolute;
      width: 30vmin;
      z-index: 20;
      transform: translateZ(60px);
    }

    .paint { top: 8%; }
    .glue { bottom: 8%; }

    @media (max-width: 768px) {
      .paint, .glue {
        width: 50vmin;
      }
      .tv-container {
        width: 85vmin;
        height: 60vmin;
      }
    }
  </style>
</head>
<body>
  <div class="scene">
    <canvas id="stars"></canvas>
    <div class="paint"></div>
    <div class="tv-container">
      <video id="tv-video" autoplay muted playsinline></video>
      <div class="vhs-overlay"></div>
      <div class="flash" id="flash"></div>
    </div>
    <div class="glue"></div>
  </div>
<script>
    // --- STARFIELD + PARALLAX ---
    const canvas = document.getElementById('stars');
    const ctx = canvas.getContext('2d');
    let stars = [];
    const STAR_COUNT = 180;

    function resizeCanvas() {
      canvas.width = window.innerWidth;
      canvas.height = window.innerHeight;
    }
    window.addEventListener('resize', resizeCanvas);
    resizeCanvas();

    // Initialize stars
    for (let i = 0; i < STAR_COUNT; i++) {
      stars.push({
        x: Math.random() * canvas.width,
        y: Math.random() * canvas.height,
        z: Math.random() * 2 - 1,
        twinkle: Math.random() * Math.PI * 2
      });
    }

    // Parallax state
    let tiltX = 0, tiltY = 0;
    document.addEventListener('mousemove', e => {
      tiltX = (e.clientX / window.innerWidth - 0.5) * 2;
      tiltY = (e.clientY / window.innerHeight - 0.5) * 2;
    });

    // Gyro on mobile
    if (window.DeviceOrientationEvent) {
      window.addEventListener('deviceorientation', e => {
        tiltX = e.gamma / 30;
        tiltY = e.beta / 30;
      });
    }

    // Animate stars
    function drawStars(t) {
      ctx.clearRect(0, 0, canvas.width, canvas.height);
      for (let s of stars) {
        s.twinkle += 0.05;
        const glowShift = Math.sin(t / 800 + s.x) * 0.5 + 0.5;
        const r = 180 + glowShift * 60;
        const b = 255 - glowShift * 100;
        const alpha = 0.4 + Math.sin(s.twinkle) * 0.4;

        const parallaxX = s.x + tiltX * s.z * 30;
        const parallaxY = s.y + tiltY * s.z * 30;

        ctx.beginPath();
        ctx.arc(parallaxX, parallaxY, 1.3, 0, Math.PI * 2);
        ctx.fillStyle = `rgba(${r},0,${b},${alpha})`;
        ctx.fill();
      }
      requestAnimationFrame(drawStars);
    }
    requestAnimationFrame(drawStars);

    // --- GLOW PULSE FOR SVGs ---
    const paintEl = document.querySelector('.paint');
    const glueEl  = document.querySelector('.glue');
    let glowTime = 0;

    function glowLoop() {
      glowTime += 0.02;
      const paintGlow = Math.sin(glowTime) * 0.5 + 0.5;
      const glueGlow  = Math.sin(glowTime + Math.PI) * 0.5 + 0.5;

      paintEl.style.filter = `drop-shadow(0 0 ${8 + paintGlow*12}px rgba(0,150,255,${0.5+paintGlow*0.3})) 
                              drop-shadow(0 0 ${6 + paintGlow*10}px rgba(255,0,120,${0.3+paintGlow*0.2}))`;

      glueEl.style.filter  = `drop-shadow(0 0 ${8 + glueGlow*12}px rgba(255,0,120,${0.5+glueGlow*0.3})) 
                              drop-shadow(0 0 ${6 + glueGlow*10}px rgba(0,150,255,${0.3+glueGlow*0.2}))`;
      requestAnimationFrame(glowLoop);
    }
    glowLoop();

    // --- PARALLAX FOR SVGs ---
    document.addEventListener('mousemove', e => {
      const dx = (e.clientX / window.innerWidth - 0.5) * 2;
      const dy = (e.clientY / window.innerHeight - 0.5) * 2;
      paintEl.style.transform = `translate3d(${dx * 30}px, ${dy * 20}px, 60px)`;
      glueEl.style.transform  = `translate3d(${-dx * 30}px, ${-dy * 20}px, 60px)`;
    });

    if (window.DeviceOrientationEvent) {
      window.addEventListener('deviceorientation', e => {
        const dx = e.gamma / 30;
        const dy = e.beta / 30;
        paintEl.style.transform = `translate3d(${dx * 30}px, ${dy * 20}px, 60px)`;
        glueEl.style.transform  = `translate3d(${-dx * 30}px, ${-dy * 20}px, 60px)`;
      });
    }
  </script>
  <script>
    /* ===========================
       TV SYSTEM: random video loop + flash image
    ============================ */
    const tvVideo = document.getElementById("tvVideo");
    const tvStatic = document.getElementById("tvStatic");
    const tvNoise = document.getElementById("tvNoise");
    const tvContainer = document.getElementById("tvContainer");

    // Video playlist
    const videos = [
      "My Movie 54.mov",
      "IMG_3838.MOV",
      "MoshUp_0021~2.mp4",
      "PXL_20250820_010944534~2.mp4"
    ];

    // Flash image setup
    const flashImg = new Image();
    flashImg.src = "flashImage.jpg"; // replace with your uploaded filename

    let order = [];
    let currentVid = 0;

    function shuffleVideos() {
      order = [...videos];
      for (let i = order.length - 1; i > 0; i--) {
        const j = Math.floor(Math.random() * (i + 1));
        [order[i], order[j]] = [order[j], order[i]];
      }
      currentVid = 0;
    }
    shuffleVideos();

    async function playNextVideo() {
      if (currentVid >= order.length) {
        shuffleVideos();
      }
      const vid = order[currentVid];
      currentVid++;
      tvVideo.src = vid;
      tvVideo.loop = false;
      tvVideo.autoplay = true;
      tvVideo.muted = true;
      tvVideo.playsInline = true;
      await tvVideo.play().catch(()=>{});
    }

    tvVideo.addEventListener("ended", playNextVideo);

    // initial autoplay
    setTimeout(() => {
      playNextVideo();
    }, 1000);

    // periodic flash overlay on TV (every ~2.5 min)
    const flashCanvas = document.createElement("canvas");
    flashCanvas.width = tvContainer.offsetWidth;
    flashCanvas.height = tvContainer.offsetHeight;
    flashCanvas.style.position = "absolute";
    flashCanvas.style.inset = "0";
    flashCanvas.style.opacity = "0";
    flashCanvas.style.transition = "opacity 0.2s ease";
    flashCanvas.style.zIndex = "12";
    tvContainer.appendChild(flashCanvas);
    const fctx = flashCanvas.getContext("2d");

    function triggerFlash() {
      const w = flashCanvas.width;
      const h = flashCanvas.height;
      fctx.clearRect(0, 0, w, h);
      fctx.drawImage(flashImg, 0, 0, w, h);
      flashCanvas.style.opacity = "1";
      setTimeout(() => { flashCanvas.style.opacity = "0"; }, 500);
    }

    setInterval(triggerFlash, 150000); // every 2.5 minutes

    // --- STATIC / VHS NOISE overlays ---
    const nctx = tvNoise.getContext("2d");
    function drawNoiseFrame() {
      const w = tvNoise.width = tvContainer.offsetWidth;
      const h = tvNoise.height = tvContainer.offsetHeight;
      const img = nctx.createImageData(w, h);
      const d = img.data;
      for (let i = 0; i < d.length; i += 4) {
        const v = Math.random() * 255;
        d[i] = d[i + 1] = d[i + 2] = v;
        d[i + 3] = 8 + Math.random() * 40;
      }
      nctx.putImageData(img, 0, 0);
      if (Math.random() < 0.06) {
        nctx.fillStyle = "rgba(255,255,255,0.03)";
        const y = Math.floor(Math.random() * h);
        nctx.fillRect(0, y, w, 1 + Math.random() * 2);
      }
    }
    setInterval(drawNoiseFrame, 80);

    // vertical drift for the whole site VHS haze
    const drift = document.createElement("div");
    drift.className = "scanlines";
    document.body.appendChild(drift);
    let driftOffset = 0;
    function animateDrift() {
      driftOffset += 0.2;
      drift.style.backgroundPositionY = `${driftOffset}px`;
      requestAnimationFrame(animateDrift);
    }
    animateDrift();

    // simulate “smack the CRT” glitch
    function bumpCRT() {
      tvContainer.style.transform = "translateY(-3px) rotate(0.5deg) scale(1.02)";
      setTimeout(() => tvContainer.style.transform = "translateY(0) rotate(0deg) scale(1)", 150);
    }
    setInterval(bumpCRT, 60000 + Math.random() * 20000); // random minute interval
  </script>
  <script>
    /* ===========================
       AUDIO SYSTEM: BM → AM → PM loop
    ============================ */
    const tracks = [
      { src: "BM.mp3", title: "BM" },
      { src: "AM.mp3", title: "AM" },
      { src: "PM.mp3", title: "PM" }
    ];
    let currentTrack = 0;
    const audio = new Audio();
    audio.loop = false;
    audio.volume = 1.0;
    let autoStarted = false;

    async function playNextTrack() {
      if (currentTrack >= tracks.length) currentTrack = 0;
      audio.src = tracks[currentTrack].src;
      currentTrack++;
      try {
        await audio.play();
      } catch (e) {
        console.log("Audio blocked; waiting for user gesture.");
      }
    }

    // move to next when one ends
    audio.addEventListener("ended", playNextTrack);

    // try autoplay after short delay
    setTimeout(async () => {
      try {
        await audio.play();
        autoStarted = true;
      } catch {
        console.log("Autoplay prevented, awaiting tap.");
      }
    }, 1500);

    // fallback: user tap starts music
    document.body.addEventListener("click", async () => {
      if (!autoStarted) {
        await playNextTrack();
        autoStarted = true;
      }
    });

    // smoother transitions / glue control
    function fadeAudio(vol, duration = 1500) {
      const start = audio.volume;
      const diff = vol - start;
      const steps = 30;
      const stepTime = duration / steps;
      let step = 0;
      const fade = setInterval(() => {
        step++;
        audio.volume = start + diff * (step / steps);
        if (step >= steps) clearInterval(fade);
      }, stepTime);
    }

    // glue interaction hook (connects to next chunk)
    window.triggerGlueAudioShift = function() {
      fadeAudio(0.2, 800);
      setTimeout(() => {
        fadeAudio(1.0, 1200);
      }, 2500);
    };
  </script>
  <script>
    /* ===========================
       GLUE + PAINT INTERACTIONS
    ============================ */
    const glueSVG = document.getElementById("glue");
    const paintSVG = document.getElementById("paint");

    // paint tap = start playback if not started
    paintSVG.addEventListener("click", async () => {
      try {
        await audio.play();
        autoStarted = true;
      } catch (err) {
        console.log("Autoplay blocked:", err);
      }
    });

    // glue tap = skip to next track w/ fade
    glueSVG.addEventListener("click", () => {
      triggerGlueAudioShift();
      playNextTrack();
      triggerTVGlitch();
    });

    /* ===========================
       VHS GLITCHING + FLASH
    ============================ */
    const vhsOverlay = document.createElement("div");
    vhsOverlay.style.position = "fixed";
    vhsOverlay.style.top = 0;
    vhsOverlay.style.left = 0;
    vhsOverlay.style.width = "100%";
    vhsOverlay.style.height = "100%";
    vhsOverlay.style.pointerEvents = "none";
    vhsOverlay.style.mixBlendMode = "screen";
    vhsOverlay.style.background =
      "repeating-linear-gradient(180deg, rgba(255,255,255,0.02) 0px, rgba(255,255,255,0.03) 2px, transparent 4px), radial-gradient(circle at center, rgba(40,0,60,0.25) 0%, rgba(0,0,0,0.85) 100%)";
    vhsOverlay.style.animation = "vhsDrift 10s linear infinite";
    vhsOverlay.style.zIndex = "10";
    document.body.appendChild(vhsOverlay);

    const styleEl = document.createElement("style");
    styleEl.textContent = `
      @keyframes vhsDrift {
        0% { background-position: 0 0, 0 0; }
        100% { background-position: 0 10px, 0 0; }
      }
      @keyframes flashTV {
        0% { opacity: 0; }
        10% { opacity: 1; }
        100% { opacity: 0; }
      }
    `;
    document.head.appendChild(styleEl);

    /* ===========================
       TV FLASH LOGIC
    ============================ */
    const tvScreen = document.querySelector(".tv-screen");
    const flashImg = "flashimg.png"; // use your flash image filename

    function triggerTVGlitch() {
      const glitch = document.createElement("div");
      glitch.style.position = "absolute";
      glitch.style.top = "0";
      glitch.style.left = "0";
      glitch.style.width = "100%";
      glitch.style.height = "100%";
      glitch.style.background = `url('${flashImg}') center/cover no-repeat`;
      glitch.style.zIndex = "9";
      glitch.style.animation = "flashTV 0.5s ease";
      tvScreen.appendChild(glitch);
      setTimeout(() => glitch.remove(), 600);
    }

    // auto flash every ~2.5 min
    setInterval(triggerTVGlitch, 150000);

    /* ===========================
       RANDOM CRT "SMACK" EFFECT
    ============================ */
    function randomGlitch() {
      const shift = Math.random() * 4 - 2;
      tvScreen.style.transform = `translate(${shift}px, ${shift}px) scale(1.01)`;
      tvScreen.style.filter = "contrast(1.3) saturate(1.3)";
      setTimeout(() => {
        tvScreen.style.transform = "translate(0,0) scale(1)";
        tvScreen.style.filter = "";
      }, 250);
    }
    setInterval(randomGlitch, 60000 + Math.random() * 30000); // 1–1.5min
  </script>
</body>
</html>
